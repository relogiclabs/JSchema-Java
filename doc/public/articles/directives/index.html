<!DOCTYPE html>
<html lang="en-us">
<link rel="stylesheet" href="/JSchema-Java/css/style.css" type="text/css" media="all" />
<link rel="stylesheet" href="/JSchema-Java/css/syntax.css" type="text/css" media="all" />
<link rel="icon" href="/JSchema-Java/images/favicon.ico">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="/JSchema-Java/js/script.js"></script>

<body>
    <header>
    <nav class="header" role="navigation">
        <div class="header-left">
            <label for="menu-checkbox">
                <input id="menu-checkbox" type="checkbox" class="menu-checkbox"/>
                <div class="menu-button">
                    <span class="menu-icon icon-bar1"></span>
                    <span class="menu-icon icon-bar2"></span>
                    <span class="menu-icon icon-bar3"></span>
                </div>
            </label>
            <a href="https://www.relogiclabs.com"><img src="/JSchema-Java/images/logo.svg" alt="Relogic Labs"></a>
        </div>
        <div class="header-right">
            <a href="/JSchema-Java">Home</a>
            <a href="/JSchema-Java/api/index.html">API Reference</a>
            <a href="https://github.com/relogiclabs/JSchema-Java">GitHub</a>
        </div>
    </nav>
</header>
    
<div class="overlay"></div>
<div class="sidebar">
    <ul>
        
        <li class="section-header">
            <a href="/JSchema-Java/articles/">Articles</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/introduction/">Introduction</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/quickstart/">Quick Start</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/validation/">Validation Syntax</a>
        </li>
        
        <li class="section-item active">
            <a href="/JSchema-Java/articles/directives/">Directives</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/specification/">Specification</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/datatypes/">Data Types</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/functions/">Functions</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/cscript/">CScript DSL</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/datetime/">Date and Time</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/components/">Components</a>
        </li>
        
        <li class="section-item">
            <a href="/JSchema-Java/articles/sourcebuild/">Source Build</a>
        </li>
        
        
    </ul>
</div>
    <main>
        
<div class="content">
    <style>
pre code { font-size: 1.1em; }
</style>
<h1 id="validation-directives">Validation Directives</h1>
<p>Directives serve as special instructions or commands for the JSchema parsers, interpreters, and validators. They are used to control various aspects of the validation process or to provide metadata for documentation. Additionally, they offer crucial information about schema and JSON, as well as essential customization of the validation procedure to meet specific requirements.</p>
<h2 id="title-directive">Title Directive</h2>
<p>Within a schema, the title directive is used to provide a name, label, or a brief intent of the schema for which it is written. Besides, the title directive is optional and additional description can be supplied as multiple comments inside the schema document to provide more detail.</p>
<p>However, this directive is only used for documentation purposes and does not have any impact in the validation process. To represent the title directive, the following example of notation can be used:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Example name or brief description&#34;</span>
</span></span></code></pre></div><h2 id="version-directive">Version Directive</h2>
<p>In a schema, the version directive is used to provide a version label of the schema document which helps to keep track of updates. Although optional, the version directive is useful for documentation purposes and does not affect the validation process. The version directive can be represented using the following notation example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">version</span><span class="o">:</span> <span class="s2">&#34;2.0.0-beta1&#34;</span>
</span></span></code></pre></div><h2 id="import-directive">Import Directive</h2>
<p>Import directive enables the addition or inclusion of a class, as defined by object-oriented programming, to a schema along with a set of methods that have specific signatures for performing custom validations. This feature extends the built-in validation capabilities of the schema. The example below illustrates how to utilize the import directive in Java language:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="kr">import</span><span class="o">:</span> <span class="nx">com</span><span class="p">.</span><span class="nx">relogiclabs</span><span class="p">.</span><span class="nx">jschema</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">extension</span><span class="p">.</span><span class="nx">GeneralExtension1</span>
</span></span></code></pre></div><h2 id="pragma-directive">Pragma Directive</h2>
<p>Pragma directives provide a mechanism to modify the default settings for certain predefined parameters of the validation process. This allows you to adjust the behaviours of schema validation process as per your requirements.</p>
<h3 id="ignore-undefined-properties">Ignore Undefined Properties</h3>
<p>The <code>IgnoreUndefinedProperties</code> pragma directive serves the purpose of instructing the validation process on how to handle JSON properties that are not explicitly defined in the schema, not even by the undefined marker or symbol. You can use this directive to specify whether such properties should be ignored during validation or if validation errors should be raised for any undefined properties in the JSON document.</p>
<p>The default value of this directive is <code>false</code>, which means that by default, undefined properties in the JSON document are not ignored, and validation errors will be raised for them. For example, the following usage of this directive instructs the validation process to ignore any undefined properties in the JSON document:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">pragma</span> <span class="nx">IgnoreUndefinedProperties</span><span class="o">:</span> <span class="kc">true</span>
</span></span></code></pre></div><h3 id="date-data-type-format">Date Data Type Format</h3>
<p>The <code>DateDataTypeFormat</code> pragma directive enables you to customize the default format of the <code>#date</code> data type. By default, the <code>#date</code> data type follows the ISO 8601 standard, precisely using the format <code>YYYY-MM-DD</code>. Additional details on date-time patterns and formats are available <a href="/JSchema-Java/articles/datetime">here</a>. The subsequent example illustrates the process of defining a customized date format for the <code>#date</code> data type:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">pragma</span> <span class="nx">DateDataTypeFormat</span><span class="o">:</span> <span class="s2">&#34;DD-MM-YYYY&#34;</span>
</span></span></code></pre></div><h3 id="time-data-type-format">Time Data Type Format</h3>
<p>To customize the default format of the <code>#time</code> data type, utilize the <code>TimeDataTypeFormat</code> pragma directive. By default, the <code>#time</code> data type follows the ISO 8601 standard, precisely in the format <code>YYYY-MM-DD'T'hh:mm:ss.FZZ</code>. Further information on date-time patterns and formats can be found <a href="/JSchema-Java/articles/datetime">here</a>. The following example demonstrates how to specify a customized time format for the <code>#time</code> data type:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">pragma</span> <span class="nx">TimeDataTypeFormat</span><span class="o">:</span> <span class="s2">&#34;DD-MM-YYYY hh:mm:ss&#34;</span>
</span></span></code></pre></div><h3 id="floating-point-tolerance">Floating Point Tolerance</h3>
<p>The pragma directive <code>FloatingPointTolerance</code> allows you to define the tolerance level for relative errors in floating-point numbers during calculations and computations carried out by the validation process. By default, this directive is set to <code>1E-10</code>, indicating a small tolerance. However, you have the flexibility to adjust this value to any desired number. To specify a custom tolerance value of <code>1E-07</code>, you can use the following notation as an example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">pragma</span> <span class="nx">FloatingPointTolerance</span><span class="o">:</span> <span class="mf">1E-07</span>
</span></span></code></pre></div><h3 id="ignore-object-property-order">Ignore Object Property Order</h3>
<p>The <code>IgnoreObjectPropertyOrder</code> pragma directive provides a means to enforce a specific order or sequence of JSON object properties, following the schema definition. This requirement for strict ordering is only needed in certain special cases. By default, this directive is set to <code>true</code>, meaning that the object property order outlined in the schema document is not mandatory. However, you can override this default by setting it to <code>false</code>, as shown in the following example below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">pragma</span> <span class="nx">IgnoreObjectPropertyOrder</span><span class="o">:</span> <span class="kc">false</span>
</span></span></code></pre></div><h3 id="enable-contextual-exception">Enable Contextual Exception</h3>
<p>The <code>EnableContextualException</code> pragma directive enables an additional type of exception. These exceptions provide supplementary contextual information about the primary exceptions, showing the errors that occurred during the validation process. The default value of this directive is <code>false</code>, meaning no contextual exceptions are generated.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">pragma</span> <span class="nx">EnableContextualException</span><span class="o">:</span> <span class="kc">true</span>
</span></span></code></pre></div><h3 id="outline-maximum-length">Outline Maximum Length</h3>
<p>The pragma directive <code>OutlineMaximumLength</code> specifies the maximum length of tree outlines generated when string representations of large Schema and JSON trees or subtrees are needed. The default maximum length is <code>200</code> characters. If the tree or subtree string exceeds this limit, an outline is shown instead of the full string representation. Currently, a basic abbreviation rule is used to create the tree outlines.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">pragma</span> <span class="nx">OutlineMaximumLength</span><span class="o">:</span> <span class="mi">500</span>
</span></span></code></pre></div><h2 id="definition--define-directive">Definition / Define Directive</h2>
<p>This feature in JSchema allows you to define a name for a schema component or fragment, which can be referenced from various parts of your schema. This means that if you encounter similar validation requirements in different sections of your schema, you can conveniently refer to the named schema component instead of duplicating the same validation rules. For more information about the schema component syntax and format, please refer to the documentation <a href="/JSchema-Java/articles/components">here</a>. Here is a simple example of how to use this directive:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">define</span> <span class="nx">$product</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;id&#34;</span><span class="o">:</span> <span class="err">@</span><span class="nx">length</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="err">@</span><span class="nx">regex</span><span class="p">(</span><span class="s2">&#34;[a-z][a-z0-9]+&#34;</span><span class="p">)</span> <span class="err">#</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="err">@</span><span class="nx">length</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="err">#</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;price&#34;</span><span class="o">:</span> <span class="err">@</span><span class="nx">range</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;inStock&#34;</span><span class="o">:</span> <span class="err">#</span><span class="kr">boolean</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="schema-directive">Schema Directive</h2>
<p>The schema directive serves as the starting or entry point for both the schema document and the schema validation process. It becomes mandatory when other directives are present within the document. In such cases, the schema directive explicitly designates the beginning of the schema document and defines the entry point for validation process.</p>
<p>However, if there are no other directives used in the document, the entire document itself is automatically considered as the schema document, with the document&rsquo;s beginning serving as its entry point. To illustrate, here is a simple example of a schema document with schema directive:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">schema</span><span class="o">:</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;user&#34;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;id&#34;</span><span class="o">:</span> <span class="err">@</span><span class="nx">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span> <span class="err">#</span><span class="nx">integer</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/*username does not allow special characters*/</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;username&#34;</span><span class="o">:</span> <span class="err">@</span><span class="nx">regex</span><span class="p">(</span><span class="s2">&#34;[a-z_]{3,30}&#34;</span><span class="p">)</span> <span class="err">#</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/*currently only one role is allowed by system*/</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;role&#34;</span><span class="o">:</span> <span class="s2">&#34;user&#34;</span> <span class="err">#</span><span class="nx">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;isActive&#34;</span><span class="o">:</span> <span class="err">#</span><span class="kr">boolean</span><span class="p">,</span> <span class="c1">//user account current status
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;registeredAt&#34;</span><span class="o">:</span> <span class="err">#</span><span class="nx">time</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="script-directive">Script Directive</h2>
<p>The script directive enables the inclusion of CScript code into a JSchema document, providing the flexibility to define custom validation functions directly within the schema document. These validation functions can accept any number of nodes across the JSON tree as parameters, enabling comprehensive processing and validation to ensure the data integrity of the entire JSON tree. For more information about CScript syntax and format, please refer to the documentation <a href="/JSchema-Java/articles/cscript">here</a>. The following is a simple example of how to use this directive:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">%</span><span class="nx">script</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">constraint</span> <span class="kd">function</span> <span class="nx">checkAccess</span><span class="p">(</span><span class="nx">role</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nx">role</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&#34;user&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">target</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="k">return</span> <span class="nx">fail</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;EX_ERRACCESS01&#34;</span><span class="p">,</span> <span class="s2">&#34;Data access incompatible with &#39;user&#39; role&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">expected</span><span class="p">(</span><span class="s2">&#34;an access at most 5 for &#39;user&#39; role&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="nx">actual</span><span class="p">(</span><span class="s2">&#34;found access &#34;</span> <span class="o">+</span> <span class="nx">target</span> <span class="o">+</span> <span class="s2">&#34; which is greater than 5&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>
</div>

    </main>
    <div class="footer">
    <div class="footer-right">
      © Relogic Labs. All rights reserved.
    </div>
</div>
</body>

</html>