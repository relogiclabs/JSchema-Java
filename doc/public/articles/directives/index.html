<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Directives - Json Schema</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://relogiclabs.github.io/JsonSchema-Java/favicon.ico><link rel=stylesheet href=/JsonSchema-Java/css/style.min.41a4e7d0a42107faafb72a9a4a48b19d588103a47ebcd6bb45a2b5f7be80886e.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/JsonSchema-Java/><span>Home</span></a></li><li class=menu-item-articles><a href=/JsonSchema-Java/articles/intro><span>Articles</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=https://relogiclabs.github.io/JsonSchema-Java><img alt=Logo src=/JsonSchema-Java/images/logo.svg></a></div><div class=logo-mobile><a href=https://relogiclabs.github.io/JsonSchema-Java><img width=70 height=70 alt=Logo src=/JsonSchema-Java/images/logo-mobile.svg></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/JsonSchema-Java/><span>Home</span></a></li><li class=menu-item-articles><a href=/JsonSchema-Java/articles/intro><span>Articles</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-md-3 mb-3"><div class=sidebar><div class=docs-menu><h4>Articles</h4><ul><li><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/intro/>Introduction</a></li><li><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/quickstart/>Quick Start</a></li><li><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/validation/>Validation Syntax</a></li><li class=active><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/directives/>Directives</a></li><li><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/specification/>Specification</a></li><li><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/datatypes/>Data Types</a></li><li><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/functions/>Functions</a></li><li><a href=https://relogiclabs.github.io/JsonSchema-Java/articles/datetime/>Date and Time</a></li></ul></div></div></div><div class="col-12 col-md-9"><div class=content><h1 id=validation-directives>Validation Directives</h1><p>Directives serve as special instructions or commands for the Schema and JSON parsers, interpreters, and validators. They are used to control various aspects of the validation process or to provide metadata for documentation. Additionally, they offer crucial information about Schema and JSON and provide custom validation functions to meet specific Schema validation requirements.</p><h2 id=title-directive>Title Directive</h2><p>Within a schema, the title directive is used to provide a name, label, or a brief intent of the schema for which it is written. Besides, the title directive is optional and additional description can be supplied as multiple comments inside the schema document to provide more detail.</p><p>However, this directive is only used for documentation purposes and does not have any impact in the validation process. To represent the title directive, the following example of notation can be used:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>%</span><span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;Example name or brief description&#34;</span>
</span></span></code></pre></div><h2 id=version-directive>Version Directive</h2><p>In a schema, the version directive is used to provide a version number of the schema which helps to keep track of updates. Although optional, the version directive is useful for documentation purposes and does not affect the validation process. The version directive can be represented using the following notation example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-stylus data-lang=stylus><span class=line><span class=cl><span class=o>%</span><span class=err>version</span><span class=p>:</span> <span class=err>2023</span><span class=p>.</span><span class=nc>09</span><span class=p>.</span><span class=nc>11</span><span class=p>.</span><span class=nc>01</span>
</span></span></code></pre></div><h2 id=include-directive>Include Directive</h2><p>Include directive enables the addition or inclusion of a class, as defined by object-oriented programming, to a schema along with a set of methods that have specific signatures for performing custom validations. This feature extends the built-in validation capabilities of the schema. In the C# language, it is also necessary to specify the assembly name together with the class name. The example below illustrates how to utilize the include directive in C# language:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>%</span><span class=nx>include</span><span class=o>:</span> <span class=nx>RelogicLabs</span><span class=p>.</span><span class=nx>JsonSchema</span><span class=p>.</span><span class=nx>Tests</span><span class=p>.</span><span class=nx>Positive</span><span class=p>.</span><span class=nx>ExternalFunctions</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                     <span class=nx>RelogicLabs</span><span class=p>.</span><span class=nx>JsonSchema</span><span class=p>.</span><span class=nx>Tests</span>
</span></span></code></pre></div><h2 id=pragma-directive>Pragma Directive</h2><p>Pragma directives provide a mechanism to modify the default settings for certain predefined parameters of the validation process. This allows you to adjust the behaviours of schema validation process as per your requirements.</p><h3 id=ignore-undefined-properties>Ignore Undefined Properties</h3><p>The <code>IgnoreUndefinedProperties</code> pragma directive serves the purpose of instructing the validation process on how to handle JSON properties that are not explicitly defined in the schema, not even by the undefined marker or symbol. You can use this directive to specify whether such properties should be ignored during validation or if validation errors should be raised for any undefined properties in the JSON document.</p><p>The default value of this directive is <code>false</code>, which means that by default, undefined properties in the JSON document are not ignored, and validation errors will be raised for them. For example, the following usage of this directive instructs the validation process to ignore any undefined properties in the JSON document:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>%</span><span class=nx>pragma</span> <span class=nx>IgnoreUndefinedProperties</span><span class=o>:</span> <span class=kc>true</span>
</span></span></code></pre></div><h3 id=floating-point-tolerance>Floating Point Tolerance</h3><p>The <code>FloatingPointTolerance</code> pragma directive allows you to define the tolerance level for relative errors in floating-point numbers during calculations and computations carried out by the validation process. By default, this directive is set to <code>1E-10</code>, indicating a small tolerance. However, you have the flexibility to adjust this value to any desired number. To specify a custom tolerance value of <code>1E-07</code>, you can use the following notation as an example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>%</span><span class=nx>pragma</span> <span class=nx>FloatingPointTolerance</span><span class=o>:</span> <span class=mf>1E-07</span>
</span></span></code></pre></div><h3 id=ignore-object-property-order>Ignore Object Property Order</h3><p>The <code>IgnoreObjectPropertyOrder</code> pragma directive provides a means to enforce a specific order or sequence of JSON object properties, following the schema definition. This requirement for strict ordering is only needed in certain special cases. By default, this directive is set to <code>true</code>, meaning that the object property order outlined in the schema document is not mandatory. However, you can override this default by setting it to <code>false</code>, as shown in the following example below:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>%</span><span class=nx>pragma</span> <span class=nx>IgnoreObjectPropertyOrder</span><span class=o>:</span> <span class=kc>false</span>
</span></span></code></pre></div><h2 id=definition--define-directive>Definition / Define Directive</h2><p>This feature in JSON schemas allows you to define a name for a fragment of schema or validation rules, which can be referenced from various parts of your schema. This means that if you encounter similar validation requirements in different sections of your schema, you can conveniently refer to the named fragment instead of duplicating the same validation rules.</p><p>By providing clear and descriptive names for these validation rules or sub-schemas, you enhance the overall clarity and context of your schema. This clarity not only makes it easier to understand the structure and intent of the schema but also contributes to keeping your complex schema well-organized, concise, and more manageable.</p><p>The name or alias of the directive is always start with <code>$</code> which also refers to that they are named fragment defined elsewhere in the schema. Here is a simple example of how to use this directive:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>%</span><span class=nx>define</span> <span class=nx>$product</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;id&#34;</span><span class=o>:</span> <span class=err>@</span><span class=nx>length</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span> <span class=err>@</span><span class=nx>regex</span><span class=p>(</span><span class=s2>&#34;[a-z][a-z0-9]+&#34;</span><span class=p>)</span> <span class=err>#</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=err>@</span><span class=nx>length</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span> <span class=err>#</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;price&#34;</span><span class=o>:</span> <span class=err>@</span><span class=nx>range</span><span class=p>(</span><span class=mf>0.1</span><span class=p>,</span> <span class=mi>1000000</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;inStock&#34;</span><span class=o>:</span> <span class=err>#</span><span class=kr>boolean</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=schema-directive>Schema Directive</h2><p>The schema directive serves as the starting or entry point for both the schema document and the schema validation process. It becomes mandatory when other directives are present within the document. In such cases, the schema directive explicitly designates the beginning of the schema document and defines the entry point for validation process.</p><p>However, if there are no other directives used in the document, the entire document itself is automatically considered as the schema document, with the document&rsquo;s beginning serving as its entry point. To illustrate, here is a simple example of a schema document with schema directive:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>%</span><span class=nx>schema</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;user&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span><span class=o>:</span> <span class=err>@</span><span class=nx>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10000</span><span class=p>)</span> <span class=err>#</span><span class=nx>integer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=cm>/*username does not allow special characters*/</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;username&#34;</span><span class=o>:</span> <span class=err>@</span><span class=nx>regex</span><span class=p>(</span><span class=s2>&#34;[a-z_]{3,30}&#34;</span><span class=p>)</span> <span class=err>#</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=cm>/*currently only one role is allowed by system*/</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;role&#34;</span><span class=o>:</span> <span class=s2>&#34;user&#34;</span> <span class=err>#</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isActive&#34;</span><span class=o>:</span> <span class=err>#</span><span class=kr>boolean</span><span class=p>,</span> <span class=c1>//user account current status
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=s2>&#34;registeredAt&#34;</span><span class=o>:</span> <span class=err>#</span><span class=nx>time</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div></div></div></div></div></div><div class=sub-footer><div class=container><div class=row><div class=col-12><div class=sub-footer-inner><div class=copyright>© <a href=https://www.relogiclabs.com>Relogic Labs</a>. All rights reserved.</div></div></div></div></div></div><script type=text/javascript src=/JsonSchema-Java/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js></script></body></html>